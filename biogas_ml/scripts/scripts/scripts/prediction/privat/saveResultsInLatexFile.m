%% saveResultsInLatexFile
% Save performance results of State Estimator in *.tex file. 
%
function status= saveResultsInLatexFile(total_performance, total_performance1storder, ...
          goal_variables, method, index_file, commentForPrinting)
%% Release: 1.2

%%

error( nargchk(6, 6, nargin, 'struct') );
error( nargoutchk(0, 1, nargout, 'struct') );

%%
% check arguments

checkArgument(total_performance, 'total_performance', 'double', '1st');
checkArgument(total_performance1storder, 'total_performance1storder', 'double', '2nd');
checkArgument(goal_variables, 'goal_variables', 'cellstr', '3rd');
checkArgument(method, 'method', 'char', 4);
checkArgument(index_file, 'index_file', 'cell', 5);
checkArgument(commentForPrinting, 'commentForPrinting', 'cellstr', 6);

%%

[perform_file, message]= ...
        fopen(sprintf('result_perform_digesters_%s_%ih_%in_%if.tex', ...
               method, index_file{1}, index_file{2}, index_file{3}), 'w');

% state_perform_header= {'component', ...
%     'mean performance 1 [\\%%]', 'min performance 1 [\\%%]', ...
%     'mean performance 2 [\\%%]', 'min performance 2 [\\%%]'};%, ...
%     ...'mean performance1st 1 [\\%%]', 'min performance1st 1 [\\%%]', ...
%     ...'mean performance1st 2 [\\%%]', 'min performance1st 2 [\\%%]'};

%%

state_perform_header= {'component', ...
    'NMCR 1 [\\%%]', ...
    'NMCR 2 [\\%%]'};%, ...
    ...'NMCR 1st 1 [\\%%]', ...
    ...'NMCR 1st 2 [\\%%]'};


%%

total_performance1storder

100 - mean(total_performance1storder(:,1))
100 - mean(total_performance1storder(:,2))

%%

n_variables= numel(goal_variables);

%%

for ivariable= 1:n_variables

  goal_variable= char(goal_variables{ivariable});

  goal_variable_= addUnderscore(goal_variable);

%     addNewRowInLatexTable(perform_file, {goal_variable, ...
%                 total_performance(ivariable, 1), ...
%                 total_min_performance(ivariable, 1), ...
%                 total_performance(ivariable, 2), ...
%                 total_min_performance(ivariable, 2), ...
%                 total_performance1storder(ivariable, 1), ...
%                 total_min_performance1storder(ivariable, 1), ...
%                 total_performance1storder(ivariable, 2), ...
%                 total_min_performance1storder(ivariable, 2)}, ...
%                 {'%s', '%.2f', '%.2f', '%.2f', '%.2f', ...
%                        '%.2f', '%.2f', '%.2f', '%.2f'}, ...
%                 (ivariable == 1), state_perform_header);
  
  addNewRowInLatexTable(perform_file, {...
                [goal_variable_, commentForPrinting{ivariable,1}], ...
                100 - total_performance(ivariable, 1), ...
                100 - total_performance(ivariable, 2)}, ...
                ...100 - total_performance1storder(ivariable, 1), ...
                ...100 - total_performance1storder(ivariable, 2)}, ...
                {'%s', '%.2f', '%.2f'},..., '%.2f', '%.2f'}, ...
                (ivariable == 1), state_perform_header);
            
end
    
%%

% addNewRowInLatexTable(perform_file, {'\\hline\nmean', ...
%                 mean(total_performance(:,1)), ...
%                 mean(total_min_performance(:,1)), ...
%                 mean(total_performance(:,2)), ...
%                 mean(total_min_performance(:,2)), ...
%                 mean(total_performance1storder(:,1)), ...
%                 mean(total_min_performance1storder(:,1)), ...
%                 mean(total_performance1storder(:,2)), ...
%                 mean(total_min_performance1storder(:,2))}, ...
%                 {'%s', '%.2f', '%.2f', '%.2f', '%.2f', ...
%                        '%.2f', '%.2f', '%.2f', '%.2f'}, 0);
                   
addNewRowInLatexTable(perform_file, {'\\hline\nmean', ...
                100 - mean(total_performance(:,1)), ...
                100 - mean(total_performance(:,2))}, ...
                ...100 - mean(total_performance1storder(:,1)), ...
                ...100 - mean(total_performance1storder(:,2))}, ...
                {'%s', '%.2f', '%.2f'},..., '%.2f', '%.2f'}, 
                0);
                     
%%            
            
% addNewRowInLatexTable(perform_file, {'min', ...
%                 min(total_performance(:,1)), ...
%                 min(total_min_performance(:,1)), ...
%                 min(total_performance(:,2)), ...
%                 min(total_min_performance(:,2)), ...
%                 min(total_performance1storder(:,1)), ...
%                 min(total_min_performance1storder(:,1)), ...
%                 min(total_performance1storder(:,2)), ...
%                 min(total_min_performance1storder(:,2))}, ...
%                 {'%s', '%.2f', '%.2f', '%.2f', '%.2f', ...
%                        '%.2f', '%.2f', '%.2f', '%.2f'}, 2);
                   
addNewRowInLatexTable(perform_file, {'min', ...
                100 - min(total_performance(:,1)), ...
                100 - min(total_performance(:,2))}, ...
                ...100 - min(total_performance1storder(:,1)), ...
                ...100 - min(total_performance1storder(:,2))}, ...
                {'%s', '%.2f', '%.2f'}, ..., '%.2f', '%.2f'}, 
                0);
                 
                        
addNewRowInLatexTable(perform_file, {'std', ...
                std(100 - total_performance(:,1)), ...
                std(100 - total_performance(:,2))}, ...
                ...std(100 - total_performance1storder(:,1)), ...
                ...std(100 - total_performance1storder(:,2))}, ...
                {'%s', '%.2f', '%.2f'}, ..., '%.2f', '%.2f'}, 
                2);
                 
%%
            
status= fclose(perform_file);
    
%%


